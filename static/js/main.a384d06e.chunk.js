(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{41:function(e,a,t){e.exports=t(70)},46:function(e,a,t){},70:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(38),c=t.n(l),s=(t(46),t(7)),o=t(8),i=t(10),m=t(9),d=t(11),u=t(72),p=t(73),h=t(14),f=t(12),b=t(19),E=Object(b.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"LOGGED IN":return Object(f.a)({},e,a.payload);default:return e}},{email:null}),g=t(29),N=t(6),v=t(71);var w=t(28),y=t.n(w),O=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(r)))).state={calendarFromValue:new Date(2018,1,1),calendarToValue:new Date(2019,11,1),calendarVisible:null},t.calendarViewHandler=function(e){return t.setState({calendarVisible:e})},t.calendarChangeHandler=function(e,a){var n=t.state,r=n.calendarFromValue;if(a>=n.calendarToValue&&"from"===e||a<=r&&"to"===e)t.setState({calendarVisible:null});else{var l="to"===e?"calendarToValue":"calendarFromValue";t.setState(Object(N.a)({calendarVisible:null},l,a)),t.props.calendarChangeHandler(Object(N.a)({},l,a))}},t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this.state,a=e.calendarFromValue,t=e.calendarToValue;this.props.calendarChangeHandler({calendarToValue:t,calendarFromValue:a})}},{key:"render",value:function(){var e=this.state,a=e.calendarFromValue,t=e.calendarToValue,n=e.calendarVisible;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row col-4 col-xl-3 align-items-center"},r.a.createElement("span",{className:"mr-2 filter__caption"},"From:"),r.a.createElement("input",{type:"text",className:"form-control filter__date-input",onClick:this.calendarViewHandler.bind(this,"from"),value:a.toLocaleDateString("en-US"),readOnly:!0}),r.a.createElement("i",{className:"fa fa-calendar filter__date-icon","aria-hidden":"true"}),r.a.createElement(y.a,{className:"from"===n?"react-calendar--show":"",onChange:this.calendarChangeHandler.bind(this,"from"),value:a})),r.a.createElement("div",{className:"row col-4 col-xl-3 align-items-center"},r.a.createElement("span",{className:"mr-2 filter__caption"},"To:"),r.a.createElement("input",{type:"text",className:"form-control filter__date-input",onClick:this.calendarViewHandler.bind(this,"to"),value:t.toLocaleDateString("en-US"),readOnly:!0}),r.a.createElement("i",{className:"fa fa-calendar filter__date-icon","aria-hidden":"true"}),r.a.createElement(y.a,{className:"to"===n?"react-calendar--show":"",onChange:this.calendarChangeHandler.bind(this,"to"),value:t})))}}]),a}(r.a.Component),C=t(20),S=t.n(C),k=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(r)))).state={items:[],itemsFiltered:[],itemsColors:[],cartCount:0,cartItems:[],showModal:!1,calendarRangeFlr:{},priceRangeFlr:{from:0,to:1e3},inStockFlr:!1,colorFlr:"All"},t.filterItems=function(){var e=t.state,a=e.items,n=e.calendarRangeFlr,r=e.inStockFlr,l=e.priceRangeFlr,c=e.colorFlr,s=n.calendarFromValue,o=n.calendarToValue,i=a.filter(function(e){var a=new Date(e["Issue date"]);return a>=s&&a<=o});r&&(i=i.filter(function(e){return e.InStock})),"All"!==c&&(i=i.filter(function(e){return e.Color===c}));var m=l.from,d=l.to;i=i.filter(function(e){return parseInt(e.Price)>=m&&parseInt(e.Price)<=d}),t.setState({itemsFiltered:i})},t.orderItem=function(e){var a=t.state.items;a[e].quanity+=1;var n=a.filter(function(e){return e.quanity}),r=n.reduce(function(e,a){return e+a.quanity},0);t.setState({cartItems:n,cartCount:r})},t.calendarChangeHandler=function(e){var a=Object(f.a)({},t.state.calendarRangeFlr,e);t.setState({calendarRangeFlr:a},t.filterItems)},t.inStockFlrChangeHandler=function(e){var a=e.target.checked;return t.setState({inStockFlr:a},t.filterItems)},t.priceChangeHandler=function(e,a){var n,r=a.target.value,l=parseInt(r),c=t.state.priceRangeFlr,s=c.from,o=c.to;n=l>s&&"to"===e||l<o&&"from"===e?Object(f.a)({},c,Object(N.a)({},e,l)):"to"===e?Object(f.a)({},c,Object(N.a)({},e,s+1)):Object(f.a)({},c,Object(N.a)({},e,o-1)),t.setState({priceRangeFlr:n},t.filterItems)},t.colorChangeHandler=function(e){var a=e.target.options;return t.setState({colorFlr:a[a.selectedIndex].value},t.filterItems)},t.modalShow=function(){return t.setState({showModal:!t.state.showModal})},t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{method:"GET",body:void 0},t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise(function(n,r){var l=new XMLHttpRequest;if(l.open(a.method,e),a.headers)for(var c in a.headers)l.setRequestHeader(c,a.headers[c]);l.onload=function(){200===l.status?n(t?JSON.parse(l.response):l.response):r(Error(l.statusText))},l.send(a.body)})})("store.json").then(function(a){var t=a.items.reduce(function(e,a){return[].concat(Object(g.a)(e),[Object(f.a)({},a,{quanity:0})])},[]),n=t;e.setState({items:t,itemsFiltered:n,itemsColors:a.items.reduce(function(e,a){return~e.indexOf(a.Color)?e:[].concat(Object(g.a)(e),[a.Color])},["All"])})})}},{key:"render",value:function(){var e=this,a=S()("modal",{"modal--show":this.state.showModal}),t=this.props.email;return t?r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"row mb-4 header"},r.a.createElement("div",{className:"col-5"}),r.a.createElement("div",{className:"col-4"},r.a.createElement("span",{className:"text-success"},"Authorized as ",t)),r.a.createElement("div",{className:"col-3",onClick:this.modalShow},r.a.createElement("span",{className:"header__cart"},"Cart: ",this.state.cartCount," items"))),r.a.createElement("article",{className:"row mb-4 filter"},r.a.createElement("div",{className:"row col-12 mb-4 justify-content-center"},r.a.createElement(O,{calendarChangeHandler:this.calendarChangeHandler.bind(this)}),r.a.createElement("div",{className:"row col-4 align-items-center"},r.a.createElement("span",{className:"filter__stock-mark"},"In stock only"),r.a.createElement("input",{className:"filter__stock-check",type:"checkbox",onChange:this.inStockFlrChangeHandler,checked:this.state.inStockFlr}))),r.a.createElement("div",{className:"row col-12 justify-content-center"},r.a.createElement("div",{className:"row col-4 col-xl-3 align-items-center"},r.a.createElement("span",{className:"filter__caption mr-2"},"Price from:"),r.a.createElement("input",{type:"number",className:"form-control filter__price-input",onChange:this.priceChangeHandler.bind(this,"from"),value:this.state.priceRangeFlr.from})),r.a.createElement("div",{className:"row col-4 col-xl-3 align-items-center"},r.a.createElement("span",{className:"mr-2 filter__caption filter__caption--price-to"},"to:"),r.a.createElement("input",{type:"number",className:"form-control filter__price-input",onChange:this.priceChangeHandler.bind(this,"to"),value:this.state.priceRangeFlr.to})),r.a.createElement("div",{className:"row col-4 align-items-center"},r.a.createElement("span",{className:"filter__stock-mark"},"Color: "),r.a.createElement("select",{className:"form-control filter__stock-select",value:this.state.colorFlr,onChange:this.colorChangeHandler},this.state.itemsColors.length&&this.state.itemsColors.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))))),r.a.createElement("hr",{className:"my-4"}),r.a.createElement("main",{className:"row items-wrap"},this.state.itemsFiltered.length&&this.state.itemsFiltered.map(function(a,t){return r.a.createElement("div",{className:"row col-12 items__item p-4 mb-4 border border-secondary",key:a.id},r.a.createElement("div",{className:"col-2"},r.a.createElement("img",{src:a.Image,className:"img-fluid",alt:""})),r.a.createElement("div",{className:"row col-10"},r.a.createElement("div",{className:"col-12 row mb-2"},r.a.createElement("span",{className:"col-4"},a.Name),r.a.createElement("span",{className:"col-4"},a["Issue date"]),r.a.createElement("span",{className:"col-4"},a.Price)),r.a.createElement("div",{className:"col-12 row align-items-center"},r.a.createElement("span",{className:"col-4 text-info"},a.Color),r.a.createElement("span",{className:"col-4 text-secondary"},a.InStock?"In stock":"Not in stock"),r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:e.orderItem.bind(e,t)},"Order"))))})),r.a.createElement("div",{className:a,onClick:this.modalShow},r.a.createElement("div",{className:"modal-dialog modal-lg"},r.a.createElement("div",{className:"modal-header bg-white"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"Your cart"),r.a.createElement("button",{type:"button",className:"close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-content p-4"},this.state.cartItems.length&&this.state.cartItems.map(function(e,a){return r.a.createElement("div",{className:"row border p-2 mb-4 col-10 mx-auto",key:e.id},r.a.createElement("div",{className:"col-2 align-self-center"},r.a.createElement("img",{src:e.Image,className:"img-fluid",alt:""})),r.a.createElement("div",{className:"row col-10"},r.a.createElement("div",{className:"col-12 row mb-2"},r.a.createElement("span",{className:"col-4"},e.Name),r.a.createElement("span",{className:"col-4"},e["Issue date"]),r.a.createElement("span",{className:"col-4"},e.Price)),r.a.createElement("div",{className:"col-12 row align-items-center"},r.a.createElement("span",{className:"col-4 text-info"},e.Color),r.a.createElement("span",{className:"col-4 text-secondary"},e.InStock?"In stock":"Not in stock"),r.a.createElement("span",null," Quanity: ",e.quanity))))}))))):r.a.createElement("header",{className:"row mb-4 header"},r.a.createElement("div",{className:"col-5"}),r.a.createElement("div",{className:"col-4"},r.a.createElement(v.a,{to:"/register",className:"mr-5"},"Sign up"),r.a.createElement(v.a,{to:"/"},"Log in")),r.a.createElement("div",{className:"col-3",onClick:this.modalShow},r.a.createElement("span",null,"Cart: ",this.state.cartCount," items")))}}]),a}(r.a.Component),j=Object(h.b)(function(e){return e})(k),_=t(21),F=t.n(_),I=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault();var a=e.target.elements,n=a[0].value,r=F()(a[1].value).toString(),l=localStorage.getItem("users")?JSON.parse(localStorage.getItem("users")):null;l&&n in l&&l[n]===r&&(t.props.dispatch({type:"LOGGED IN",payload:{email:n}}),t.props.history.push("/search"))},t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{className:"login",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"col-12 text-center mb-2"},r.a.createElement("label",{className:"login__label"},r.a.createElement("span",{className:"d-block"},"Email"),r.a.createElement("input",{type:"email"}))),r.a.createElement("div",{className:"col-12 text-center mb-2"},r.a.createElement("label",{className:"login__label"},r.a.createElement("span",{className:"d-block"},"Password"),r.a.createElement("input",{type:"password"}))),r.a.createElement("button",{className:"btn btn-primary mb-2"},"Login"),r.a.createElement("span",null,"Don't have account? ",r.a.createElement(v.a,{to:"/register"},"Register")))}}]),a}(r.a.Component),x=Object(h.b)(function(e){return e})(I),H=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(i.a)(this,Object(m.a)(a).call(this,e))).state={error:""},t.emailCheck=function(e){return/^[\w-]{1}[\w]*@[\w]+\.[\w]{2,6}$/i.test(e)},t.submitHandler=function(e){e.preventDefault();var a=t.form.current.elements,n=a[0].value,r=a[1].value,l=a[2].value;if(n&&t.emailCheck(n))if(r&&l&&r===l){if(localStorage){var c=localStorage.getItem("users")?JSON.parse(localStorage.getItem("users")):{};if(n in c)return void t.setState({error:"User has already been registered"});c=Object(f.a)({},c,Object(N.a)({},n,F()(r).toString())),localStorage.setItem("users",JSON.stringify(c)),t.props.dispatch({type:"LOGGED IN",payload:{email:n}}),t.props.history.push("/search")}}else t.setState({error:"Passwords don't match or empty"});else t.setState({error:"Email is incorrect or empty"})},t.form=r.a.createRef(),t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this.state.error,a=S()("col-12",{"d-none":!e});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:a},r.a.createElement("p",{className:"text-center text-danger"},e)),r.a.createElement("form",{ref:this.form,className:"login",onSubmit:this.submitHandler},r.a.createElement("div",{className:"col-12 text-center mb-2"},r.a.createElement("label",{className:"login__label"},r.a.createElement("span",{className:"d-block"},"Email"),r.a.createElement("input",{type:"email"}))),r.a.createElement("div",{className:"col-12 text-center mb-2"},r.a.createElement("label",{className:"login__label"},r.a.createElement("span",{className:"d-block"},"Password"),r.a.createElement("input",{type:"password"}))),r.a.createElement("div",{className:"col-12 text-center mb-2"},r.a.createElement("label",{className:"login__label"},r.a.createElement("span",{className:"d-block"},"Password Confirm"),r.a.createElement("input",{type:"password"}))),r.a.createElement("button",{className:"btn btn-success mb-2",type:"submit"}," Sign up "),r.a.createElement("span",null,"Has already been registered? ",r.a.createElement(v.a,{to:"/"},"Login"))))}}]),a}(r.a.Component),V=Object(h.b)(function(e){return e})(H),R=function(e){function a(){return Object(s.a)(this,a),Object(i.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(h.a,{store:E},r.a.createElement(u.a,null,r.a.createElement("div",{className:"container py-4"},r.a.createElement(p.a,{path:"/",exact:!0,component:x}),r.a.createElement(p.a,{path:"/register",component:V}),r.a.createElement(p.a,{path:"/search",component:j}))))}}]),a}(r.a.Component);c.a.render(r.a.createElement(R,null),document.querySelector("#root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.a384d06e.chunk.js.map